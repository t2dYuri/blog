<div class="f-block">
  <%= form_for @article do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <%= f.label 'Название' %>
    <%= f.text_field :title, class: 'form-control' %>

    <%= f.label 'Описание' %><small> (Не более 500 символов)</small>
    <%= f.text_area :description, class: 'form-control', rows: 4 %>

    <%= f.label 'Текст' %>
    <%= tinymce_assets %>
    <%= f.text_area :text, class: 'tinymce', rows: 15 %>
    <hr>
    <%= f.submit 'Сохранить изменения', class: 'btn btn-main' %>
    <%= link_to 'Отмена', articles_path, class: 'btn btn-default' %>
  <% end %>
</div>

<script>
  tinyMCE.init({
    selector: "textarea.tinymce",
    toolbar: ["styleselect | bold italic | alignleft aligncenter alignright alignjustify | forecolor backcolor | fontsizeselect | removeformat | code"],
    plugins: "image,link,table,charmap,textcolor,hr,code,preview",
    menu : {
      edit: {title: 'Edit', items: 'undo redo | cut copy paste pastetext | selectall'},
      insert: {title: 'Insert', items: 'link unlink image | charmap hr'},
      table: {title: 'Table', items: 'inserttable tableprops deletetable | cell row column'},
      tools: {title: 'Tools', items: 'preview code visualaid'}
    },
    style_formats: [
      {title: "Headers", items: [
        {title: "Header 1", format: "h1"},
        {title: "Header 2", format: "h2"},
        {title: "Header 3", format: "h3"},
        {title: "Header 4", format: "h4"},
        {title: "Header 5", format: "h5"},
        {title: "Header 6", format: "h6"}
      ]},
      {title: "Inline", items: [
        {title: "Bold", icon: "bold", format: "bold"},
        {title: "Italic", icon: "italic", format: "italic"},
        {title: "Underline", icon: "underline", format: "underline"},
        {title: "Strikethrough", icon: "strikethrough", format: "strikethrough"},
        {title: "Superscript", icon: "superscript", format: "superscript"},
        {title: "Subscript", icon: "subscript", format: "subscript"}
      ]},
      {title: "Paragraph", format: "p"},
      {title: "Blockquote", format: "blockquote"},
      {title: "Div", format: "div"},
      {title: "Pre", format: "pre"},
      {title: "Code", format: "code"},

      {title: 'Image Left', selector: 'img', styles: {'float': 'left', 'margin': '5px 10px 5px 0'}},
      {title: 'Image Right', selector: 'img', styles: {'float': 'right', 'margin': '5px 0 5px 10px'}}
    ]
  });
</script>
